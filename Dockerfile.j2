{#
    This is the template from which all OpenSSL Dockerfiles are generated. As
    such, this is the file you should edit in order to make changes. We include
    a comment about this in the generated file.
-#}
# This file is automatically generated with Dockerfile.j2 as a template. Do not
# edit by hand, since your changes will be lost!
FROM buildpack-deps AS builder

# Create a shallow clone of the implementation repository in the work directory,
# containing only the code of the specified version/tag.
WORKDIR /{{ implementation }}
RUN git clone --branch {{ tag }} --depth 1 {{ url }} .

{%- if version == "0.12.0" %}

# The test fail to build on this version, but the program and libraries build
# just fine. To work around this issue, remove the lines from the Makefile that
# specify the tests.
RUN sed -i "/cd tests/d" Makefile
{%- endif %}

{%- if version == "0.13.0" %}

# The author of this package has hard coded his home directory in the Makefile,
# so CMake has to be installed and executed again.
RUN apt-get update && apt-get install -y cmake
RUN cmake . && make
{%- endif %}

# Build
RUN make
